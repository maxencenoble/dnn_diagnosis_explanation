# Documentation

This document explains how the documentation is built.

## Exposing the website

The documentation is a website exposed through [GitHub pages](https://pages.github.com/)
and is built on the [Jekyll](https://jekyllrb.com/) blog engine.

The documentation is deployed on the branch `gh-pages` in the Makefile rule `deploy_doc`.
The Makefile also contains rules to install the website locally (`install_website` and
`serve_website`). The rule `deploy_doc` is called by Travis (see `.travis.yml`).

## Building the website

Basically, the website is made of three parts:

* Presentation pages : manually-written HTML files in `docs/` using Jekyll's features, like the home page and the tutorials table of content.
* Tutorials : the notebooks exported to HTML using the Makefile rule `tutorials`. We need `docs/notebook.tpl` to generate a Jekyll-like file instead of a hard-written HTML file. `docs/_layouts/notebook.html` is then used for the integration.
* API reference : the API reference built with the Makefile rule `api_ref` (which calls [`pdoc3`](https://pdoc3.github.io/pdoc/)). The [templates](https://pdoc3.github.io/pdoc/doc/pdoc/#custom-templates) in `docs/api_templates/` are used to fully integrate the API reference into the website.

Additionally, the home page displays interactive plots that are generated by the
Makefile rule `gallery`.

Let's notice that the interactive plots, the tutorials and the API reference are
not tracked by git: they are automatically generated during the deployment (which
calls the Makefile rule `deploy_doc`).

To build the website locally:

* `make install_website` (once)
* `make serve_website`
* `make doc` (`update_nb` takes quite a long time; have a look at the Makefile to avoid calling it every time)
